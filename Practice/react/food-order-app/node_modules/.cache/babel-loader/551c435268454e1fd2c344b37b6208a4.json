{"ast":null,"code":"import _slicedToArray from\"D:/wiki/Practice/react/food-order-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"D:/wiki/Practice/react/food-order-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"D:/wiki/Practice/react/food-order-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useReducer}from\"react\";import CartContext from\"./cart-context\";import{jsx as _jsx}from\"react/jsx-runtime\";var defaultCartState={item:[],totalAmount:0};var cartReducer=function cartReducer(state,action){if(action.type===\"ADD_ITEM\"){var updatedTotalAmount=state.totalAmount+action.item.price*action.item.amount;var existingCartItemIndex=state.item.findIndex(function(item){return item.id===action.item.id;});var existingCartItem=state.item[existingCartItemIndex];var updatedItem;var updatedItems;if(existingCartItem){updatedItem=_objectSpread(_objectSpread({},existingCartItem),{},{amount:existingCartItem.amount+action.item.amount});updatedItems=_toConsumableArray(state.item);updatedItems[existingCartItemIndex]=updatedItem;}else{updatedItem=_objectSpread({},action.item);updatedItems=state.item.concat(updatedItem);}return{item:updatedItems,totalAmount:updatedTotalAmount};};if(action.type===\"REMOVE_ITEM\"){var _existingCartItemIndex=state.item.findIndex(function(item){return item.id===action.id;});var _existingCartItem=state.item[_existingCartItemIndex];var _updatedTotalAmount=state.totalAmount-_existingCartItem.price;var _updatedItems;if(_existingCartItem.amount===1){_updatedItems=state.item.filter(function(item){return item.id!==action.id;});}else{var _updatedItem=_objectSpread(_objectSpread({},_existingCartItem),{},{amount:_existingCartItem.amount-1});_updatedItems=_toConsumableArray(state.item);_updatedItems[_existingCartItemIndex]=_updatedItem;}return{item:_updatedItems,totalAmount:_updatedTotalAmount};};return defaultCartState;};var CartContextProvider=function CartContextProvider(props){var _useReducer=useReducer(cartReducer,defaultCartState),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],dispatchCartAction=_useReducer2[1];var addItemHandler=function addItemHandler(item){dispatchCartAction({type:\"ADD_ITEM\",item:item});};var removeItemHandler=function removeItemHandler(id){dispatchCartAction({type:\"REMOVE_ITEM\",id:id});};var cartContext={item:cartState.item,totalAmount:cartState.totalAmount,addItem:addItemHandler,removeItem:removeItemHandler};return/*#__PURE__*/_jsx(CartContext.Provider,{value:cartContext,children:props.children});};export default CartContextProvider;","map":{"version":3,"names":["React","useReducer","CartContext","defaultCartState","item","totalAmount","cartReducer","state","action","type","updatedTotalAmount","price","amount","existingCartItemIndex","findIndex","id","existingCartItem","updatedItem","updatedItems","concat","filter","CartContextProvider","props","cartState","dispatchCartAction","addItemHandler","removeItemHandler","cartContext","addItem","removeItem","children"],"sources":["D:/wiki/Practice/react/food-order-app/src/store/CartContextProvider.js"],"sourcesContent":["import React, { useReducer } from \"react\";\r\nimport CartContext from \"./cart-context\";\r\n\r\nconst defaultCartState = {\r\n  item: [],\r\n  totalAmount: 0,\r\n};\r\n\r\nconst cartReducer = (state, action) => {\r\n  if (action.type === \"ADD_ITEM\") {\r\n    const updatedTotalAmount = state.totalAmount + (action.item.price * action.item.amount);\r\n\r\n    const existingCartItemIndex = state.item.findIndex((item) => {\r\n      return item.id === action.item.id;\r\n    });\r\n\r\n    const existingCartItem = state.item[existingCartItemIndex];\r\n\r\n    let updatedItem;\r\n    let updatedItems;\r\n\r\n    if (existingCartItem) {\r\n      updatedItem = {\r\n        ...existingCartItem,\r\n        amount: existingCartItem.amount + action.item.amount,\r\n      };\r\n\r\n      updatedItems = [...state.item];\r\n      updatedItems[existingCartItemIndex] = updatedItem;\r\n    } else {\r\n      updatedItem = {\r\n        ...action.item,\r\n      };\r\n      updatedItems = state.item.concat(updatedItem);\r\n    }  \r\n\r\n    return {\r\n      item: updatedItems,\r\n      totalAmount: updatedTotalAmount,\r\n    }\r\n  };\r\n  \r\n  if (action.type === \"REMOVE_ITEM\") {\r\n\r\n    const existingCartItemIndex = state.item.findIndex((item) => {\r\n      return item.id === action.id;\r\n    });\r\n\r\n    const existingCartItem = state.item[existingCartItemIndex];\r\n\r\n    const updatedTotalAmount = state.totalAmount - existingCartItem.price;\r\n\r\n    let updatedItems;\r\n    if (existingCartItem.amount === 1) {\r\n      updatedItems = state.item.filter(item => item.id !== action.id)\r\n    } else {\r\n      const updatedItem = {\r\n        ...existingCartItem, \r\n        amount: existingCartItem.amount - 1,\r\n      };\r\n      updatedItems = [...state.item];\r\n      updatedItems[existingCartItemIndex] = updatedItem;\r\n    }\r\n\r\n    return {\r\n      item: updatedItems,\r\n      totalAmount: updatedTotalAmount,\r\n    }\r\n\r\n  };\r\n\r\n  return defaultCartState;\r\n}\r\n\r\nconst CartContextProvider = (props) => {\r\n\r\n  const [cartState, dispatchCartAction] = useReducer(cartReducer, defaultCartState);\r\n\r\n  const addItemHandler = (item) => {\r\n    dispatchCartAction({\r\n      type: \"ADD_ITEM\",\r\n      item: item,\r\n    })\r\n  };\r\n  const removeItemHandler = (id) => {\r\n    dispatchCartAction({\r\n      type: \"REMOVE_ITEM\",\r\n      id: id,\r\n    })\r\n  };\r\n\r\n  const cartContext = {\r\n    item: cartState.item,\r\n    totalAmount: cartState.totalAmount,\r\n    addItem: addItemHandler,\r\n    removeItem: removeItemHandler,\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider value={cartContext}>\r\n      {props.children}\r\n    </CartContext.Provider>\r\n  )\r\n};\r\n\r\nexport default CartContextProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module"}